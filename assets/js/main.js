let playerPunkte = 0;
let computerPunkte = 0;
let rundenAnzahl = 5;
const aktuelleRunde = 0;
let winner = '';
let winnerAusgabe = '';
let thumbAusgabe = '';
let bisherigeErgebnisse = [];

const playBtn = document.querySelector('.intro button');
const introScreen = document.querySelector('.intro');
const gameArena = document.querySelector('.game-arena');
// const gameTextBanner = document.querySelector('.game-text-banner');
const rundenAktuell = document.getElementById('runden-anzahl');
const bisherigeErgebnisseAnzeige = document.getElementById('demo1');
// const res = document.getElementById('demo');
const avatarPlayer = [
  'üòÑ',
  'üòÅ',
  'üòÜ',
  'ü§ó',
  'ü§ì',
  'üòé',
  'üòô',
  'üòö',
  'ü§†',
  'üë¥',
  'üòã',
  'üòú',
  'üëµ',
  'üë∞',
  'ü§£',
  'üë∏',
  'üë©‚Äçüåæ',
  'üë®‚ÄçüöÄ',
];
const avatarComputer = ['ü§ñ', 'üëæ', 'üëª', 'üëΩ', 'üíª', 'üñ•', 'üïπ', 'ü§°', 'üí©', 'üéÉ', 'üî•', '‚ö°Ô∏è', 'üõ∏', 'üöÄ', 'üìº'];
const avatarVictory = ['üòù', 'üòú', 'üòÅ', 'üòÑ', 'üòÄ', 'üòç', 'ü•≥', 'ü§©', 'üòà', 'üòò', 'ü§ó', 'üòè', 'üòù', 'üòé', 'üòÖ', 'ü•¥'];
const avatarLost = ['üò©', 'üòÆ', 'üò¨', 'üòï', 'üò≥', 'üòë', 'üôÑ', 'ü§ï', 'ü§Æ', 'üò§', 'üòØ', 'üò•', 'ü§™', 'üòñ', 'üò≤', 'üò±'];
const playerHand = document.getElementById('player-hand');
const computerHand = document.getElementById('computer-hand');
const haendeZusammen = document.querySelectorAll('.haende .hands');

haendeZusammen.forEach(hand => {
  hand.addEventListener('animationend', function() {
    this.style.animation = '';
  });
});

const start = function() {
  // const game = document.querySelector('game');
  const gameText = document.querySelector('.game-text');
  const gameRunden = document.querySelector('.game-runden');
  // const formular = document.querySelector('.formular');
  const gameScoreBoard = document.querySelector('.game-score-board');
  const intro = document.querySelector('.intro');
  const restart = document.querySelector('.restart');

  // const gameAuswahl = document.querySelector('game-auswahl');
  // const gameErgebnisse = document.querySelector('game-ergebnisse');
  // const restartScreen = document.querySelector('.restart');

  const x = `#232f34`;
  const y = `#f4f4f2`;
  const z = 'lightgray';
  const anzeigeX = [gameText, gameRunden];
  const anzeigeY = [intro, restart];
  const anzeigeZ = [gameScoreBoard];

  anzeigeX.map(el => (el.style.backgroundColor = x));
  anzeigeX.map(el => (el.style.color = 'snow'));
  anzeigeY.map(el => (el.style.backgroundColor = y));
  anzeigeZ.map(el => (el.style.backgroundColor = z));
};
start();

const randomNumber = function(arrayLaenge) {
  return Math.floor(Math.random() * arrayLaenge.length);
};

let avaPlRanAktuell = '';
let avaCoRanAktuell = '';
const randomAvatarP = function() {
  const avaPlRan = avatarPlayer[randomNumber(avatarPlayer)];
  const avaCoRan = avatarComputer[randomNumber(avatarComputer)];
  document.querySelector('#avatar-player').innerHTML = avaPlRan;
  document.querySelector('#avatar-computer').innerHTML = avaCoRan;
  avaPlRanAktuell = avaPlRan;
  avaCoRanAktuell = avaCoRan;
};
randomAvatarP();

// Start Game
const startGame = () => {
  playBtn.addEventListener('click', () => {
    introScreen.classList.add('fadeOut');
    gameArena.classList.remove('fadeOut');
    // console.log('click: Start');
  });
};
const zitate = ['Beam me up, Scotty üë®üèª‚ÄçüöÄüõ∏', ' Fascinating!üññ', 'üññ Live long and prosper'];
const randomZitat = () => zitate[randomNumber(zitate)];

const mitte = () => {
  document.getElementById('letsPlay').innerHTML = 'finde dein Mitte, ohhhmmmmm üç≥';
};
const kreis = document.querySelector('.versus');

const reset = () => {
  // console.log('resettttt');

  playerPunkte = 0;
  computerPunkte = 0;
  rundenAktuell.innerHTML = `Í∞ÄÏúÑ‚úåÔ∏è Î∞îÏúÑüëä Î≥¥üñê Ïä§Ìåçüññ ÎèÑÎßàÎ±Äü¶é 0/${rundenAnzahl}`;
  document.getElementById('player-punkte').innerHTML = 0;
  document.getElementById('computer-punkte').innerHTML = 0;
  document.getElementById('letsPlay').innerHTML = randomZitat();
  const restartScreen = document.querySelector('.restart');
  restartScreen.classList.add('fadeOut');
  bisherigeErgebnisse = [];
  winnerAusgabe = [];
  bisherigeErgebnisseAnzeige.innerHTML = bisherigeErgebnisse;

  playerHand.classList.remove('winnerFarbePlayer');
  computerHand.classList.remove('winnerFarbeComputer');
  randomAvatarP();
  document.getElementById('muhammad-ali').style.opacity = '0';
};

const motivation = [
  `Weiter rudern üö£‚Äç‚ôÄÔ∏èüö£‚Äç‚ôÄÔ∏èüö£‚Äç‚ôÄÔ∏è!`,
  'As you think, so shall you become ü•ãü§∏‚Äç‚ôÇÔ∏è',
  'üê≥ done, dieser Kreis in der Mitte...ü§î',
];
const randomMotivation = () => motivation[randomNumber(motivation)];

const winStats = function() {
  const createdDiv = document.querySelectorAll('.lastThreeRounds');

  if (createdDiv.length % 4 === 0) {
    document.getElementById('restart-text').innerHTML = randomMotivation();
    document.querySelector('.last3').innerHTML = ``;
    return createdDiv.forEach(el => el.remove());
  }
  document.getElementById('restart-text').innerHTML = randomMotivation();

  let plural;
  if (createdDiv.length > 1) {
    plural = 'rounds';
  } else {
    plural = 'lost';
  }
  document.querySelector('.last3').innerHTML = `Last ${createdDiv.length} ${plural}`;
};

// im restart Fenster zeigt den Gewinner
const create = function() {
  const section = document.querySelector('.recPast');
  const introDiv = document.createElement('div');
  const introH1 = document.createElement('h1');
  const pIntroDiv = document.createTextNode(`${thumbAusgabe}${winnerAusgabe}`);

  introDiv.append(introH1);
  introH1.append(pIntroDiv);
  introDiv.className = 'lastThreeRounds';
  section.append(introDiv);
  introDiv.append(introH1);
  winStats();
};
// Restart Game
const restartGame = () => {
  const restartButton = document.querySelector('.restart button');
  const restartScreen = document.querySelector('.restart');
  const match = document.querySelector('.game-arena');
  restartScreen.classList.remove('fadeOut');
  match.classList.remove('fadeIn');

  document.getElementById('winner').innerHTML = `<h4>${winner}</h4>`;

  restartButton.innerHTML = 'Restart';
  restartButton.addEventListener('click', () => reset());
  create();
};
// Runden
const runden = document.getElementsByName('runden');
// Wie viele Runden?
const rundenModi = function(e) {
  // console.log(e.target.id);
  // console.log(e.target.value);
  // console.log(e.target.checked);
  rundenAnzahl = e.target.value;
  rundenAktuell.innerHTML = `Í∞ÄÏúÑ‚úåÔ∏è Î∞îÏúÑüëä Î≥¥üñê Ïä§Ìåçüññ ÎèÑÎßàÎ±Äü¶é ${aktuelleRunde}/${e.target.value}`;

  reset();
};

for (const singleRunde of runden) {
  singleRunde.addEventListener('click', rundenModi);
}

// Runden Spielstand 0/5 1/5 usw aktuelle Runde
function einerVon(playerP, computerP) {
  const spielstand = playerP + computerP;
  rundenAktuell.innerHTML = `Í∞ÄÏúÑ‚úåÔ∏è Î∞îÏúÑüëä Î≥¥üñê Ïä§Ìåçüññ ÎèÑÎßàÎ±Äü¶é ${spielstand}/${rundenAnzahl}`;
}

// Ermittlung des Gewinners
function gewinnerErmittlung(playerP, computerP) {
  if (playerP + computerP >= rundenAnzahl) {
    // console.log('game end');
    // console.log(playerPunkte);
    // console.log(computerPunkte);
    einerVon(playerP, computerP);
    if (playerP > computerP) {
      winner = `You win ${avaPlRanAktuell}`;
      winnerAusgabe = avatarVictory[randomNumber(avatarVictory)];
      thumbAusgabe = 'üëç';
      playerHand.classList.add('winnerFarbePlayer');
      computerHand.classList.remove('winnerFarbeComputer');
    } else if (playerP < computerP) {
      winner = `Comp wins ${avaCoRanAktuell}`;
      winnerAusgabe = avatarLost[randomNumber(avatarLost)];
      thumbAusgabe = 'üëé';
      playerHand.classList.remove('winnerFarbePlayer');
      computerHand.classList.add('winnerFarbeComputer');
    }

    restartGame();
    // setTimeout(() => {
    //   restartGame();
    // }, 500);
  }
}

// button player1
const buttons = document.querySelectorAll('.game-auswahl > button');
const playhand = function(e) {
  // console.log(e.target);
  // console.log(e.target.id);
  // console.log(e.target.innerText);
  const player = e.target.id;
  // console.log(player);
  let playerHandSymbol = e.target.id;

  if (playerHandSymbol === 'schere') {
    playerHandSymbol = '‚úåÔ∏è';
  } else if (playerHandSymbol === 'stein') {
    playerHandSymbol = 'üëä';
  } else if (playerHandSymbol === 'papier') {
    playerHandSymbol = 'üñê';
  } else if (playerHandSymbol === 'spock') {
    playerHandSymbol = 'üññ';
  } else {
    playerHandSymbol = 'ü¶é';
  }

  document.getElementById('muhammad-ali').style.opacity = '0';

  setTimeout(() => {
    playerHand.classList.remove('winnerFarbePlayer');
    computerHand.classList.remove('winnerFarbeComputer');

    // ZufallsHaende
    const haende = [
      { wert: 'schere', symbol: '‚úåÔ∏è', farbe: 'red' },
      { wert: 'stein', symbol: 'üëä', farbe: 'blue' },
      { wert: 'papier', symbol: 'üñê', farbe: 'yellow' },
      { wert: 'spock', symbol: 'üññ', farbe: 'green' },
      { wert: 'lizard', symbol: 'ü¶é', farbe: 'orange' },
    ];

    const haendeWert = haende.map(x => x.wert);
    const haendeSymbol = haende.map(x => x.symbol);
    // const haendeFarben = haende.map((x) => x.farbe);
    // console.log(haendeWert);
    // console.log(haendeSymbol);
    const randomZahl = Math.floor(Math.random() * haende.length);
    const zufallsHand = haendeWert[randomZahl];
    const zufallsHandSymbol = haendeSymbol[randomZahl];
    // const zufallsHandFarbe = haendeFarben[randomZahl];
    // console.log(zufallsHand);
    // console.log(zufallsHandSymbol);
    // console.log(zufallsHandFarbe);
    bisherigeErgebnisse.push(playerHandSymbol, zufallsHandSymbol);
    document.getElementById('demo1').innerHTML = bisherigeErgebnisse.join('');

    playerHand.innerHTML = player;
    computerHand.innerHTML = zufallsHand;
    // console.log(zufallsHand);
    // console.log(player);
    // console.log(e.target);

    const winColorDraw = function() {
      setTimeout(() => {
        computerHand.classList.add('winnerFarbeComputer');
        playerHand.classList.add('winnerFarbePlayer');
      }, 500);
    };

    const winColorPlayer = function() {
      setTimeout(() => {
        playerHand.classList.add('winnerFarbePlayer');
      }, 500);
    };

    const winColorComputer = function() {
      setTimeout(() => {
        computerHand.classList.add('winnerFarbeComputer');
      }, 500);
    };

    const gewinner = document.querySelector('.game-text-banner > h4');
    if (player === 'schere' && zufallsHand === 'schere') {
      gewinner.innerHTML = `‚úåÔ∏è it's a tie ‚úåÔ∏è`;
      playerHand.innerHTML = '‚úåÔ∏è';
      computerHand.innerHTML = '‚úåÔ∏è';
      winColorDraw();
    }
    if (player === 'schere' && zufallsHand === 'stein') {
      gewinner.innerHTML = '(and as it always has) üíÉ Rock crushes Scissors';
      playerHand.innerHTML = '‚úåÔ∏è';
      computerHand.innerHTML = 'üëä';
      computerPunkte += 1;
      winColorComputer();
    }
    if (player === 'schere' && zufallsHand === 'papier') {
      gewinner.innerHTML = 'Scissors cuts Paper';
      playerHand.innerHTML = '‚úåÔ∏è';
      computerHand.innerHTML = 'üñê';
      playerPunkte += 1;
      winColorPlayer();
    }
    if (player === 'schere' && zufallsHand === 'spock') {
      gewinner.innerHTML = 'Spock smashes Scissors üññüî´ü™ì‚úÇÔ∏è‚úÇÔ∏è';
      playerHand.innerHTML = '‚úåÔ∏è';
      computerHand.innerHTML = 'üññ';
      computerPunkte += 1;
      winColorComputer();
    }
    if (player === 'schere' && zufallsHand === 'lizard') {
      gewinner.innerHTML = 'Scissors decapitates Lizard ‚úÇÔ∏èü¶éüòµ';
      playerHand.innerHTML = '‚úåÔ∏è';
      computerHand.innerHTML = 'ü¶é';
      playerPunkte += 1;
      winColorPlayer();
    }
    // / //////////
    if (player === 'stein' && zufallsHand === 'schere') {
      gewinner.innerHTML = '(and as it always has) üëóü§òüé∏ Rock crushes Scissors ‚úÇÔ∏è';
      playerHand.innerHTML = 'üëä';
      computerHand.innerHTML = '‚úåÔ∏è';
      playerPunkte += 1;
      winColorPlayer();
    }
    if (player === 'stein' && zufallsHand === 'stein') {
      gewinner.innerHTML = `ü§òüé∏it's rockin' rollü§òüé∏`;
      playerHand.innerHTML = 'üëä';
      computerHand.innerHTML = 'üëä';
      winColorDraw();
    }
    if (player === 'stein' && zufallsHand === 'papier') {
      gewinner.innerHTML = 'Paper covers Rock üóûüïµÔ∏è‚Äç‚ôÄÔ∏èü§òüé∏';
      playerHand.innerHTML = 'üëä';
      computerHand.innerHTML = 'üñê';
      computerPunkte += 1;
      winColorComputer();
    }
    if (player === 'stein' && zufallsHand === 'spock') {
      gewinner.innerHTML = 'Spock vaporizes Rock! üññüî´ü§òüé∏';
      playerHand.innerHTML = 'üëä';
      computerHand.innerHTML = 'üññ';
      computerPunkte += 1;
      winColorComputer();
    }
    if (player === 'stein' && zufallsHand === 'lizard') {
      gewinner.innerHTML = 'ü§òüé∏ Rock crushes Lizard ü¶é';
      playerHand.innerHTML = 'üëä';
      computerHand.innerHTML = 'ü¶é';
      playerPunkte += 1;
      winColorPlayer();
    }

    // / //////////
    if (player === 'papier' && zufallsHand === 'schere') {
      gewinner.innerHTML = '‚úÇÔ∏è Scissors cuts Paper üìú';
      playerHand.innerHTML = 'üñê';
      computerHand.innerHTML = '‚úåÔ∏è';
      computerPunkte += 1;
      winColorComputer();
    }
    if (player === 'papier' && zufallsHand === 'stein') {
      gewinner.innerHTML = 'üìù Paper covers Rock üåö';
      playerHand.innerHTML = 'üñê';
      computerHand.innerHTML = 'üëä';
      playerPunkte += 1;
      winColorPlayer();
    }
    if (player === 'papier' && zufallsHand === 'papier') {
      gewinner.innerHTML = `üî• it's a tie üî•`;
      playerHand.innerHTML = 'üñê';
      computerHand.innerHTML = 'üñê';
      winColorDraw();
    }

    if (player === 'papier' && zufallsHand === 'spock') {
      gewinner.innerHTML = 'Paper disproves Spock üë©‚Äçüéìüìöü§üüí™üññ';
      playerHand.innerHTML = 'üñê';
      computerHand.innerHTML = 'üññ';
      playerPunkte += 1;
      winColorPlayer();
    }
    if (player === 'papier' && zufallsHand === 'lizard') {
      gewinner.innerHTML = 'Lizard eats Paper ü¶éüçΩüòãüìÑ';
      playerHand.innerHTML = 'üñê';
      computerHand.innerHTML = 'ü¶é';
      computerPunkte += 1;
      winColorComputer();
    }
    // / //////////
    if (player === 'spock' && zufallsHand === 'schere') {
      gewinner.innerHTML = 'Spock smashes Scissors üññü™ì‚úÇÔ∏è';
      playerHand.innerHTML = 'üññ';
      computerHand.innerHTML = '‚úåÔ∏è';
      playerPunkte += 1;
      winColorPlayer();
    }
    if (player === 'spock' && zufallsHand === 'stein') {
      gewinner.innerHTML = 'Spock vaporizes Rock üññüî´ü§òüé∏';
      playerHand.innerHTML = 'üññ';
      computerHand.innerHTML = 'üëä';
      playerPunkte += 1;
      winColorPlayer();
    }
    if (player === 'spock' && zufallsHand === 'papier') {
      gewinner.innerHTML = 'Paper disproves Spock üë©‚Äçüéìüìöü§üüí™üññ';
      playerHand.innerHTML = 'üññ';
      computerHand.innerHTML = 'üñê';
      computerPunkte += 1;
      winColorComputer();
    }

    if (player === 'spock' && zufallsHand === 'spock') {
      gewinner.innerHTML = 'New Spock meets Old Spock üññüïîüöÄüï§ü§™';
      playerHand.innerHTML = 'üññ';
      computerHand.innerHTML = 'üññ';
      winColorDraw();
    }
    if (player === 'spock' && zufallsHand === 'lizard') {
      gewinner.innerHTML = 'Lizard poisons Spock üññü§¢üçÑüç≠ü§™';
      playerHand.innerHTML = 'üññ';
      computerHand.innerHTML = 'ü¶é';
      computerPunkte += 1;
      winColorComputer();
    }
    // / //////////
    if (player === 'lizard' && zufallsHand === 'schere') {
      gewinner.innerHTML = 'Scissors decapitates Lizard ‚úÇÔ∏èü¶éüòµ';
      playerHand.innerHTML = 'ü¶é';
      computerHand.innerHTML = '‚úåÔ∏è';
      computerPunkte += 1;
      winColorComputer();
    }
    if (player === 'lizard' && zufallsHand === 'stein') {
      gewinner.innerHTML = 'Rock crushes Lizard ü§òüé∏ü™ìü¶é';
      playerHand.innerHTML = 'ü¶é';
      computerHand.innerHTML = 'üëä';
      computerPunkte += 1;
      winColorComputer();
    }
    if (player === 'lizard' && zufallsHand === 'papier') {
      gewinner.innerHTML = 'Lizard eats Paper ü¶éüçΩüìÑüòã';
      playerHand.innerHTML = 'ü¶é';
      computerHand.innerHTML = 'üñê';
      playerPunkte += 1;
      winColorPlayer();
    }

    if (player === 'lizard' && zufallsHand === 'spock') {
      gewinner.innerHTML = 'Lizard poisons Spock üññü§¢üçÑüç≠ü§™';
      playerHand.innerHTML = 'ü¶é';
      computerHand.innerHTML = 'üññ';
      playerPunkte += 1;
      winColorPlayer();
    }
    if (player === 'lizard' && zufallsHand === 'lizard') {
      gewinner.innerHTML = `ü¶é vs ü¶é === it's a tie`;
      playerHand.innerHTML = 'ü¶é';
      computerHand.innerHTML = 'ü¶é';
      winColorDraw();
    }

    document.getElementById('computer-punkte').innerHTML = computerPunkte;
    document.getElementById('player-punkte').innerHTML = playerPunkte;
    gewinnerErmittlung(playerPunkte, computerPunkte);
    einerVon(playerPunkte, computerPunkte);
  }, 500);
  kreis.addEventListener('click', mitte);
  document.querySelector('.left').style.animation = 'flipIt 0.5s linear both';
  document.querySelector('.right').style.animation = 'flipIt 0.5s linear both';
};

function init() {
  for (const singleButton of buttons) {
    singleButton.addEventListener('click', playhand);
  }
}

startGame();
document.addEventListener('DOMContentLoaded', init);
